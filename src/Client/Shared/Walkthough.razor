@page "/walkthough"
@attribute [Microsoft.AspNetCore.Authorization.AllowAnonymous]
@inherits LayoutComponentBase

<style>
    .wk-container {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
    }

    .first-card {
        background-color: #EC3679;
        background-image: linear-gradient(315deg, #EC3679 0%, rgba(38,132,255,1) 80%);
    }

    .second-card {
        background-color: #f6be65;
        background-image: linear-gradient(135deg, #f6be65 0, #e6603a 80%);
    }

    .third-card {
        background-color: #e1358f;
        background-image: linear-gradient(315deg, #e1358f 0, #7e6ce7 80%)
    }

    .bounceIn {
        opacity: 0;
        animation-delay: 0.5s;
        animation-duration: 0.5s;
        animation-name: bounceIn;
        animation-fill-mode: forwards;
    }

    .bounceOut {
        animation-duration: 0.5s;
        animation-name: bounceOut;
        animation-fill-mode: forwards;
    }

    .backInDown {
        opacity: 0;
        animation-delay: 0.5s;
        animation-duration: 0.5s;
        animation-name: backInDown;
        animation-fill-mode: forwards;
    }

    .backOutDown {
        animation-duration: 0.5s;
        animation-name: backOutDown;
        animation-fill-mode: forwards;
    }

    .rotateIn {
        opacity: 0;
        animation-delay: 0.5s;
        animation-duration: 0.5s;
        animation-name: rotateIn;
        animation-fill-mode: forwards;
    }

    .rotateOut {
        animation-duration: 0.5s;
        animation-name: rotateOut;
        animation-fill-mode: forwards;
    }
</style>

<MudCarousel @ref="_carousel" Class="wk-container" Style="width: 100%; height: 100%;" ShowArrows="true" ShowDelimiters="true" AutoCycle="false" TData="object">
    <DelimiterTemplate Context="selected">
        <div Class="mud-button-root mud-icon-button mud-icon-button-color-inherit mud-ripple mud-ripple-icon">
            <span class="mud-icon-button-label">
                <MudIcon Icon="@(selected ? "fas fa-circle" : "far fa-circle")" Style="color: #ffffff; font-size: 1rem !important;" />
            </span>
        </div>
    </DelimiterTemplate>
    <ChildContent>
        <MudCarouselItem Transition="Transition.Slide" >
            <MudCard Outlined="false" Square="true" Class="wk-container first-card border-0 d-flex flex-column justify-center">
                <MudHidden Breakpoint="Breakpoint.MdAndUp" Invert="true">
                    <MudCardMedia Image="/images/walkthough/wk_1_l.png" Class="mb-5 align-self-center backInDown" Style="height:360px; width:600px;" />
                </MudHidden>
                <MudHidden Breakpoint="Breakpoint.MdAndUp" Invert="false" Class="px-5">
                    <MudCardMedia Image="/images/walkthough/wk_1_s.png" Class="mb-5 align-self-center backInDown" Style="height:226px; width:374px;" />
                </MudHidden>
                <MudCardContent Class="pa-4">
                    <MudGrid Spacing="0">
                        <MudItem xs="0" md="0" lg="2" xl="2"></MudItem>

                        <MudItem xs="12" md="12" lg="8" xl="8">
                            <MudText Class="backInDown" Typo="Typo.h5" Style="font-weight: 700; color: #F7941E" Align="Align.Center">
                                Minhas Notícias
                            </MudText>
                            <MudText Typo="Typo.subtitle1" Class="mt-1" Style="font-weight: 500; color: #ffffff" Align="Align.Center">Beautfiful Mobile Intefaces</MudText>
                            <MudText Typo="Typo.body1" Class="mt-5" Align="Align.Center" Style="font-weight: 400; color: #ffffff">
                                Welcome to Minhas Notícias. A beautifully crafted Mobile PWA & Site Template made to run incredibly fast and be extremely easy to edit and customize.
                            </MudText>

                            <MudButton OnClick="NextAsync" Variant="Variant.Filled" FullWidth="true" Size="Size.Medium" Class="mt-15 rounded-xl" Style="@($"color:{Colors.Shades.White}; border: 2px solid {Colors.Shades.White};")"> Next </MudButton>
                        </MudItem>

                        <MudItem xs="0" md="0" lg="2" xl="2"></MudItem>
                    </MudGrid>
                </MudCardContent>
            </MudCard>
        </MudCarouselItem>
        <MudCarouselItem Transition="Transition.Slide">
            <MudCard Outlined="false" Square="true" Class="wk-container second-card border-0 d-flex flex-column justify-center">
                <MudHidden Breakpoint="Breakpoint.MdAndUp" Invert="true">
                    <MudCardMedia Image="/images/walkthough/wk_2_l.png" Class="mb-5 align-self-center backInDown" Style="height:360px; width:600px;" />
                </MudHidden>
                <MudHidden Breakpoint="Breakpoint.MdAndUp" Invert="false" Class="px-5">
                    <MudCardMedia Image="/images/walkthough/wk_2_s.png" Class="mb-5 align-self-center backInDown" Style="height:226px; width:374px;" />
                </MudHidden>
                <MudCardContent Class="pa-4">
                    <MudGrid Spacing="0">
                        <MudItem xs="0" md="0" lg="2" xl="2"></MudItem>

                        <MudItem xs="12" md="12" lg="8" xl="8">
                            <MudText Class="backInDown" Typo="Typo.h5" Style="font-weight: 700; color: #0052cc " Align="Align.Center">
                                Material Design
                            </MudText>
                            <MudText Class="mt-1" Typo="Typo.subtitle1" Style="font-weight: 500; color: #ffffff " Align="Align.Center">Component framework for Blazor</MudText>
                            <MudText Typo="Typo.body1" Class="mt-5" Align="Align.Center" Style="font-weight: 400; color: #ffffff">
                                Based on MudBlazor with an emphasis on ease of use and clear structure. It is perfect for .NET developers who want to rapidly build web applications without having to struggle with CSS and Javascript
                            </MudText>

                            <MudButton OnClick="NextAsync" Variant="Variant.Filled" FullWidth="true" Size="Size.Medium" Class="mt-15 rounded-xl" Style="@($"color:{Colors.Shades.White}; border: 2px solid {Colors.Shades.White};")"> Next </MudButton>
                        </MudItem>

                        <MudItem xs="0" md="0" lg="2" xl="2"></MudItem>
                    </MudGrid>
                </MudCardContent>
            </MudCard>
        </MudCarouselItem>
        <MudCarouselItem Transition="Transition.Slide">
            <MudCard Outlined="false" Square="true" Class="wk-container third-card border-0 d-flex flex-column justify-center">
                <MudHidden Breakpoint="Breakpoint.MdAndUp" Invert="true">
                    <MudCardMedia Image="/images/walkthough/wk_3_l.png" Class="mb-5 align-self-center backInDown" Style="height:360px; width:600px;" />
                </MudHidden>
                <MudHidden Breakpoint="Breakpoint.MdAndUp" Invert="false" Class="px-5">
                    <MudCardMedia Image="/images/walkthough/wk_3_s.png" Class="mb-5 align-self-center backInDown" Style="height:226px; width:374px;" />
                </MudHidden>
                <MudCardContent Class="pa-4">
                    <MudGrid Spacing="0">
                        <MudItem xs="0" md="0" lg="2" xl="2"></MudItem>

                        <MudItem xs="12" md="12" lg="8" xl="8">
                            <MudText Class="backInDown" Typo="Typo.h5" Style="font-weight: 700; color: #2684FF " Align="Align.Center">
                                And Much More
                            </MudText>
                            <MudText Typo="Typo.subtitle1" Class="mt-1" Style="font-weight: 500; color: #ffffff " Align="Align.Center">Explore Minhas Notícias! It's super powerful!</MudText>
                            <MudText Typo="Typo.body1" Class="mt-5" Align="Align.Center" Style="font-weight: 400; color: #ffffff ">
                                There are so many features, we can't describe them all! Start exploring and get Minhas Notícias Now!
                            </MudText>

                            <MudButton OnClick="ExploreAsync" Variant="Variant.Outlined" FullWidth="true" Size="Size.Medium" Class="mt-15 rounded-xl" Style="@($"color:{Colors.Shades.White}; border: 2px solid {Colors.Shades.White};")"> EXPLORE NOW </MudButton>
                        </MudItem>

                        <MudItem xs="0" md="0" lg="2" xl="2"></MudItem>
                    </MudGrid>
                </MudCardContent>
            </MudCard>
        </MudCarouselItem>
    </ChildContent>
</MudCarousel>

@code{
    private MudCarousel<object> _carousel;

    private async Task NextAsync()
    {
        _carousel.Next();
    }

    [CascadingParameter] public MainLayout Parent { get; set; }

    private async Task ExploreAsync()
    {
        Parent.IsFirstVisit = !Parent.IsFirstVisit;
        await _clientPreferenceManager.ChangeFirstVisitAsync(Parent.IsFirstVisit);
        await InvokeAsync(StateHasChanged);
        _navigationManager.NavigateTo("/");
    }
}
